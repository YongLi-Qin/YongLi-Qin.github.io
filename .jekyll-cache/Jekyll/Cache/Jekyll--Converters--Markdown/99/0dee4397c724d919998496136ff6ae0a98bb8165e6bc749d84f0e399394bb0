I"ç<h1 id="-why-this-matters">ğŸ¯ Why This Matters</h1>

<p>In the previous post, we introduced the basic concepts behind <code class="highlighter-rouge">useEffect</code>.
Now, letâ€™s dive into practical examples to understand why we need it â€” and what issues can arise if we ignore it.</p>

<hr />

<h1 id="-use-case-1-fetching-api-data">ğŸ“Œ Use Case 1: Fetching API Data</h1>

<h2 id="-without-useeffect-wrong">âŒ Without useEffect (Wrong)</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">BadComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.example.com/data</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">setData</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>Every render triggers a fetch</p>
  </li>
  <li>
    <p>setData() causes re-render â†’ infinite loop</p>
  </li>
  <li>
    <p>â—ï¸ App becomes slow, unstable, or crashes</p>
  </li>
</ul>

<hr />

<h2 id="-with-useeffect-correct">âœ… With useEffect (Correct)</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">GoodComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.example.com/data</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">setData</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>fetch runs only once on mount</li>
  <li>No repeated API calls</li>
</ul>

<h1 id="-use-case-2-setting-up-event-listeners">ğŸ“Œ Use Case 2: Setting up Event Listeners</h1>

<h2 id="-without-useeffect-wrong-1">âŒ Without useEffect (Wrong)</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">BadResizeComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">resize</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Resize</span> <span class="nx">the</span> <span class="nb">window</span><span class="o">!&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span><span class="p">}</span>

</code></pre></div></div>

<!-- 
### ğŸ§ª Understanding useEffect Comparison and Triggering

###  ğŸ’¼ How Dependency Comparison Works?

React's `useEffect` hook uses **shallow comparison** for its dependency array:


---

### ğŸ§ Primitive Values (number, string, boolean)
```javascript
useEffect(() => {
  // Runs when userId changes
}, [userId]); // Compares with `===`
```

- Uses strict equality (===) comparison
- Effect runs only when the value actually changes


---

### ğŸ¤” When useEffect Triggers?

- First Render (Mount)
- Always runs after initial render


---

#### ğŸ’¡ Subsequent Renders

- Runs after render completes

-Only if shallow comparison detects changes in dependencies

---


#### â­•ï¸ The Render Cycle

- Component renders (due to state/props change)

- React compares each dependency with previous values

- Effect executes if any dependency changed

---

#### ğŸ”‘ Key Points
- useEffect runs asynchronously after render completes

- Parent re-renders will cause child effects to re-evaluate

- State updates (useState) trigger re-renders which may trigger effects

---
 -->
:ET